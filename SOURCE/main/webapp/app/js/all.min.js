var gabblerApp=angular.module("gabblerApp",["ngRoute","ngAnimate","gabbler.translate","gabbler.login.service","gabbler.menu","gabbler.login","gabbler.register","gabbler.home","gabbler.timeline"]);gabblerApp.config(["$routeProvider",function(e){e.when("/",{templateUrl:"/main/webapp/app/js/modules/index/home.html",controller:"indexCtrl"}),e.when("/timeline",{templateUrl:"/main/webapp/app/js/modules/timeline/timeline.html"})}]).run(["$http",function(e){e.defaults.headers.post={"Content-Type":"application/json","Access-Control-Allow-Origin":"*","Access-Control-Allow-Headers":"x-requested-with"},e.defaults.headers.get={"Content-Type":"application/json","Access-Control-Allow-Origin":"*","Access-Control-Allow-Headers":"x-requested-with"}}]),angular.module("gabbler.translate",["pascalprecht.translate","ngCookies"]).config(["$translateProvider",function(e){e.useStaticFilesLoader({prefix:"/main/webapp/app/js/modules/languages/",suffix:".json"}),e.preferredLanguage("en")}]).controller("MainCtrl",["$scope","$translate",function(e,t){e.changeLanguage=function(e){t.use(e)}}]),angular.module("gabbler.home",["gabbler.menu","gabbler.login","gabbler.register"]).controller("indexCtrl",["$scope","AuthenticationService",function(e,t){e.pageClass="indexPageClass",t.ClearCredentials()}]),angular.module("gabbler.login",[]).controller("loginCtrl",["$scope","$rootScope","$cookieStore","$location","AuthenticationService","$route",function(e,t,r,n,o){e.login=function(){e.dataLoading=!0,o.Login(e.username,e.pwd,function(t){t.token?(o.SetCredentials(e.username,t.token),e.dataLoading=!1,n.path("/timeline")):(e.error="Invalid credentials",e.dataLoading=!1)})}}]).directive("login",function(){return{restrict:"E",controller:"loginCtrl",templateUrl:"/main/webapp/app/js/modules/login/login.html"}}),angular.module("gabbler.menu",[]).directive("menu",function(){return{restrict:"E",scope:!0,replace:!0,templateUrl:"/main/webapp/app/js/modules/menu/menu.html"}}).controller("menuCtrl",["$scope","$cookieStore","$location","AuthenticationService",function(e,t,r,n){e.nickname=t.get("globals")?t.get("globals").currentUser.username:"",e.$watch(function(e){return e.nickname},function(){}),e.logout=function(){n.Logout(function(){})}}]),angular.module("gabbler.register",["gabbler.register.service","gabbler.login.service"]).controller("registerCtrl",["$scope","$rootScope","$location","RegisterService","AuthenticationService",function(e,t,r,n,o){e.register=function(){e.dataLoading=!0,n.Register(e.lastname,e.firstname,e.username,e.pwd,function(t){t.success?(o.Login(e.username,e.pwd),o.SetCredentials(e.username,e.pwd),r.path("/wall")):(e.error=t.message,e.dataLoading=!1)})}}]).directive("register",function(){return{restrict:"E",templateUrl:"/main/webapp/app/js/modules/register/register.html"}}),angular.module("gabbler.timeline",[]).controller("profileOverviewCtrl",["$scope","$cookieStore","$location",function(){}]).controller("timelineCtrl",["$scope","$cookieStore","$location",function(){}]).controller("suggestionsCtrl",["$scope","$cookieStore","$location",function(){}]),angular.module("gabbler.login.service",[]).factory("AuthenticationService",["Base64","$http","$cookieStore","$rootScope","$timeout",function(e,t,r,n){var o={};return o.Login=function(e,r,n){var o={password:r,username:e};t.post("http://localhost:8082/gabbler/api/login",o).success(function(e,t){n(e,t)}).error(function(e,t){n(e,t)})},o.Logout=function(e){var n={token:r.get("globals").currentUser.token},o={headers:{"Content-Type":"application/json"}};t.get("http://localhost:8082/gabbler/api/logout",o,n).success(function(t,r){e(t,r)}).error(function(t,r){e(t,r)})},o.SetCredentials=function(e,o){n.globals={currentUser:{username:e,token:o}},t.defaults.headers.common.Authorization="Basic "+o,r.put("globals",n.globals)},o.GetCredentials=function(){return r.globals},o.ClearCredentials=function(){n.globals={},r.remove("globals"),r.remove("UserToken"),t.defaults.headers.common.Authorization="Basic "},o}]).factory("Base64",function(){var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";return{encode:function(t){var r,n,o,a,i,l="",c="",s="",u=0;do r=t.charCodeAt(u++),n=t.charCodeAt(u++),c=t.charCodeAt(u++),o=r>>2,a=(3&r)<<4|n>>4,i=(15&n)<<2|c>>6,s=63&c,isNaN(n)?i=s=64:isNaN(c)&&(s=64),l=l+e.charAt(o)+e.charAt(a)+e.charAt(i)+e.charAt(s),r=n=c="",o=a=i=s="";while(u<t.length);return l},decode:function(t){var r,n,o,a,i,l="",c="",s="",u=0,g=/[^A-Za-z0-9\+\/\=]/g;g.exec(t),t=t.replace(/[^A-Za-z0-9\+\/\=]/g,"");do o=e.indexOf(t.charAt(u++)),a=e.indexOf(t.charAt(u++)),i=e.indexOf(t.charAt(u++)),s=e.indexOf(t.charAt(u++)),r=o<<2|a>>4,n=(15&a)<<4|i>>2,c=(3&i)<<6|s,l+=String.fromCharCode(r),64!=i&&(l+=String.fromCharCode(n)),64!=s&&(l+=String.fromCharCode(c)),r=n=c="",o=a=i=s="";while(u<t.length);return l}}}),angular.module("gabbler.register.service",[]).factory("RegisterService",["$http","$cookieStore","$rootScope","$timeout",function(e,t,r,n){var o={};return o.Register=function(e,t,r,o,a){n(function(){if(""!==e&&""!==t&&""!==r&&""!==o){var n={success:"true"};"true"===n.success&&(n.message="One field is incorrect"),a(n)}},1e3)},o}]);